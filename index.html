<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

  
  
  <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script src="../Api/eflow.js"></script>

    <script
src="https://code.jquery.com/jquery-3.3.1.min.js"
integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
crossorigin="anonymous"></script>

<script>
  window.TrelloPowerUp.initialize({
   // 'show-settings': function(t, options){
      // when a user clicks the gear icon by your Power-Up in the Power-Ups menu
      // what should Trello show. We highly recommend the popup in this case as
      // it is the least disruptive, and fits in well with the rest of Trello's UX
     // return t.popup({
     //   title: 'Custom Fields Settings',
     ///   url: './login.html',
     //   height: 184 // we can always resize later
    //  });
   // },
   'show-authorization': function(t, options){
    // return what to do when a user clicks the 'Authorize Account' link
    // from the Power-Up gear icon which shows when 'authorization-status'
    // returns { authorized: false }
    // in this case we would open a popup
    var model = {
  "companyID":0,
  "username":"admin",
  "password":"admin"
}


    return t.popup({
      title: 'E-Flow Login Ol',
      url: 'http://localhost:15055/Api/User/Login',
      data:JSON.stringify(model),
      height: 140,
    });
  },


    'authorization-status': function(t, options){
var Result = false;

var model = {
  "companyID":0,
  "username":"admin",
  "password":"admin"
}
var Url = "http://localhost:15055/Api/User/Login";
  
ajax({
  url:Url,
  type:"POST",
   data:JSON.stringify(model),
   contentType: "application/json"
}).done(function(res){
Result = true;
});
      // return a promise that resolves to the object with
      // a property 'authorized' being true/false
      // you can also return the object synchronously if you know
      // the answer synchronously
      return new TrelloPowerUp.Promise((resolve) => resolve({ authorized: Result }));
    }
  });
</script>
</head>


<body>
    <p>Burak Test</p>
</body>
</html>